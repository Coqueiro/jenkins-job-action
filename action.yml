name: 'Run Jenkins Job with Build Result'
description: 'Triggers Jenkins Job and follows up build result'
author: 'Data Platform Team'
inputs:
  jenkins_url:
    description: 'Jenkins domain URL'
  jenkins_user:
    description: 'Jenkins username that will be impersonated to run the jobs'
  jenkins_token:
    description: 'Jenkins token generated by user'
  job_name:
    description: 'Jenkins job that will be triggered and followed up'
  jenkins_params:
    description: 'Jenkins build parameters to use in job'
    required: false
  console_log_regex:
    description: 'Base64 encoded jenkins console log regex to filter out unecessary output text. This regex search runs using re.DOTALL'
    required: false
  console_log_regex_group:
    description: 'Jenkins console log regex group number to collect specific match from regex grouping'
    required: false
    default: '0'
  job_timeout:
    description: 'Jenkins timeout period for called functions. Default to 150 seconds'
    required: false
    default: '150'
runs:
  using: 'docker'
  image: 'Dockerfile'

branding:
  icon: 'check-circle'
  color: 'green'
